"use strict";function randomInteger(e,t){return Math.round(e-.5+Math.random()*(t-e+1))}function arrayToPoints(e){var t=[];for(var r in e)t.push(e[r].x),t.push(","),t.push(e[r].y),t.push(" ");return t.join("")}function randomPointsOnLine(e,t){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=Math.random()*r,i={};return i.x=e.x-n*(e.x-t.x)/r,i.y=e.y-n*(e.y-t.y)/r,i}function middlePointOnLine(e,t){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=r/2,i={};return i.x=e.x-n*(e.x-t.x)/r,i.y=e.y-n*(e.y-t.y)/r,i}function HexObject(e,t){this.center=e,this.size=t,this.edgePoints=[]}function drawHexSVG(e,t,r,n,i,s,o){var a=document.getElementById("Figure"),u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",r+"px"),u.setAttributeNS(null,"height",n+"px"),u.setAttributeNS(null,"id","svg_figure");var l=new HexObject({x:20,y:20},e);l.hexCornersFlat();for(var c=0;c<i;c++)l.getPointOnEdge(randomPointsOnLine,c);for(var d=Number(t),g=arrayToPoints(l.corners),h=l.size,v=(l.center.x,l.center.y,2*h),m=Math.sqrt(3)/2*v+d,p=3*(v/4)+d,f=0,y=v/2;y<r-v/2;y+=p){for(var b=f%2==0?m:m/2,x=function(e){var t=document.createElementNS(svgNS,"g");t.setAttribute("class","tile"),t.setAttribute("transform","translate("+y+","+e+")");var r=document.createElementNS(svgNS,"polygon");r.setAttribute("points",g),r.setAttribute("fill",s),r.setAttribute("stroke",o),u.appendChild(t),t.appendChild(r),l.edgePoints.forEach(function(e){for(var r=0;r<=5;r++){var n=randomInteger(0,5),i=document.createElementNS(svgNS,"line");i.setAttribute("x1",e[r].x),i.setAttribute("y1",e[r].y),i.setAttribute("x2",e[n].x),i.setAttribute("y2",e[n].y),i.setAttribute("stroke",o),t.appendChild(i)}})},w=b;w<n-.7*m;w+=m)x(w);f++}a.appendChild(u)}function SquareObject(e,t){this.center=e,this.size=t,this.edgePoints=[]}function drawSquareSVG(e,t,r,n,i,s,o){var a=document.getElementById("Figure"),u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",r+"px"),u.setAttributeNS(null,"height",n+"px"),u.setAttributeNS(null,"id","svg_figure");var l=new SquareObject({x:20,y:20},e);l.squareCornersFlat();for(var c=0;c<i;c++)l.getPointOnEdge(randomPointsOnLine,c);for(var d=Number(t),g=arrayToPoints(l.corners),h=l.size,v=(l.center.x,l.center.y,h/Math.sqrt(2)*2),m=v,p=v/2;p<r-v/2;p+=v+d)for(var f=function(e){var t=document.createElementNS(svgNS,"g");t.setAttribute("class","tile"),t.setAttribute("transform","translate("+p+","+e+")");var r=document.createElementNS(svgNS,"polygon");r.setAttribute("points",g),r.setAttribute("fill",s),r.setAttribute("stroke",o),u.appendChild(t),t.appendChild(r),l.edgePoints.forEach(function(e){for(var r=0;r<=3;r++){var n=randomInteger(0,3),i=document.createElementNS(svgNS,"line");i.setAttribute("x1",e[r].x),i.setAttribute("y1",e[r].y),i.setAttribute("x2",e[n].x),i.setAttribute("y2",e[n].y),i.setAttribute("stroke",o),t.appendChild(i)}})},y=m/2;y<n-v/2;y+=m+d)f(y);a.appendChild(u)}function initiateDownload(){var e=[window.document];e.forEach(function(e){var t=getSources(e,emptySvgDeclarationComputed);SVGSources=[];for(var r=0;r<t.length;r++)SVGSources.push(t[r])})}function getSources(e,t){var r=[],n=e.querySelectorAll("svg");return[].forEach.call(n,function(e){e.setAttribute("version","1.1"),e.removeAttribute("xmlns"),e.removeAttribute("xlink"),e.hasAttributeNS(prefix.xmlns,"xmlns")||e.setAttributeNS(prefix.xmlns,"xmlns",prefix.svg),e.hasAttributeNS(prefix.xmlns,"xmlns:xlink")||e.setAttributeNS(prefix.xmlns,"xmlns:xlink",prefix.xlink),setInlineStyles(e,t);var n=(new XMLSerializer).serializeToString(e),i=e.getBoundingClientRect();r.push({top:i.top,left:i.left,width:i.width,height:i.height,class:e.getAttribute("class"),id:e.getAttribute("id"),childElementCount:e.childElementCount,source:[doctype+n]})}),r}function setInlineStyles(e,t){function r(e){var r,n,i,s,o=getComputedStyle(e),a="";for(r=0,n=o.length;r<n;r++)i=o[r],s=o.getPropertyValue(i),s!==t.getPropertyValue(i)&&(a+=i+":"+s+";");e.setAttribute("style",a)}function n(e){function t(e){if(e&&e.hasChildNodes())for(var n=e.firstChild;n;)1===n.nodeType&&"SCRIPT"!=n.nodeName&&(r.push(n),t(n)),n=n.nextSibling}var r=[];return r.push(e),t(e),r}for(var i=n(e),s=i.length;s--;)r(i[s])}function download(e){var t="untitled";e.id?t=e.id:e.class?t=e.class:window.document.title&&(t=window.document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase());var r=window.URL.createObjectURL(new Blob(e.source,{type:"text/xml"})),n=document.getElementsByClassName("svg-crowbar")[0];n&&n.remove();var i=document.createElement("a");body.appendChild(i),i.setAttribute("class","svg-crowbar"),i.setAttribute("download",t+".svg"),i.setAttribute("href",r),i.style.display="none",i.click(),setTimeout(function(){window.URL.revokeObjectURL(r)},10)}function TriangleObject(e,t){this.center=e,this.size=t,this.edgePoints=[]}function drawTriangleSVG(e,t,r,n,i,s,o){var a=document.getElementById("Figure"),u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",r+"px"),u.setAttributeNS(null,"height",n+"px"),u.setAttributeNS(null,"id","svg_figure");var l=new TriangleObject({x:20,y:20},e);l.triangleCornersFlat();for(var c=0;c<i;c++)l.getPointOnEdge(randomPointsOnLine,c);for(var d=Number(t),g=arrayToPoints(l.corners),h=l.size,v=(l.center.x,l.center.y,Math.cos(Math.PI/6)*h*2),m=Math.sin(Math.PI/6)*h+h,p=v/2;p<r-v;p+=v+d)for(var f=function(e){var t=document.createElementNS(svgNS,"g");t.setAttribute("class","tile"),t.setAttribute("transform","translate("+p+","+e+")");var r=document.createElementNS(svgNS,"polygon");r.setAttribute("points",g),r.setAttribute("fill",s),r.setAttribute("stroke",o),u.appendChild(t),t.appendChild(r),l.edgePoints.forEach(function(e){for(var r=0;r<=2;r++){var n=randomInteger(0,2),i=document.createElementNS(svgNS,"line");i.setAttribute("x1",e[r].x),i.setAttribute("y1",e[r].y),i.setAttribute("x2",e[n].x),i.setAttribute("y2",e[n].y),i.setAttribute("stroke",o),t.appendChild(i)}})},y=2*m;y<n-m/2;y+=v+d)f(y);a.appendChild(u)}var select_figure=document.getElementById("figure_select"),svgNS="http://www.w3.org/2000/svg",sizeValue=document.getElementById("sizeValue"),offsetValue=document.getElementById("offsetValue"),svgWidth=document.getElementById("svgWidth"),svgHeight=document.getElementById("svgHeight"),svgLines=document.getElementById("lines"),bgColor=document.getElementById("bgColor"),lineColor=document.getElementById("lineColor"),buttonDraw=document.getElementById("generate");buttonDraw.addEventListener("click",function(){var e=document.getElementById("svg_figure");switch(e&&e.remove(),select_figure.value){case"HEX":drawHexSVG(sizeValue.value,offsetValue.value,svgWidth.value,svgHeight.value,svgLines.value,bgColor.value,lineColor.value);break;case"Triangle":drawTriangleSVG(sizeValue.value,offsetValue.value,svgWidth.value,svgHeight.value,svgLines.value,bgColor.value,lineColor.value);break;case"Square":drawSquareSVG(sizeValue.value,offsetValue.value,svgWidth.value,svgHeight.value,svgLines.value,bgColor.value,lineColor.value)}});var buttonDownload=document.getElementById("download");buttonDownload.addEventListener("click",function(){initiateDownload(),download(SVGSources[1])}),HexObject.prototype.hexCornersFlat=function(){for(var e=[],t=0;t<=5;t++){var r={},n=60*t,i=Math.PI/180*n;r.x=this.center.x+this.size*Math.cos(i),r.y=this.center.y+this.size*Math.sin(i),e.push(r)}this.corners=e},HexObject.prototype.getPointOnEdge=function(e,t){this.i=t;for(var r=[],n=this.corners,i=0;i<6;i++)r.push(e(n[i],n[i+1]||n[0]));this.edgePoints[t]=r};var centerHex={x:300,y:100},sizeHex=80,hex=new HexObject(centerHex,sizeHex);hex.hexCornersFlat();for(var i=0;i<3;i++)hex.getPointOnEdge(randomPointsOnLine,i);SquareObject.prototype.squareCornersTop=function(){for(var e=[],t=0;t<=3;t++){var r={},n=90*t,i=Math.PI/180*n;r.x=this.center.x+this.size*Math.cos(i),r.y=this.center.y+this.size*Math.sin(i),e.push(r)}this.corners=e},SquareObject.prototype.squareCornersFlat=function(){for(var e=[],t=0;t<=3;t++){var r={},n=90*t+45,i=Math.PI/180*n;r.x=this.center.x+this.size*Math.cos(i),r.y=this.center.y+this.size*Math.sin(i),e.push(r)}this.corners=e},SquareObject.prototype.getPointOnEdge=function(e,t){this.i=t;for(var r=[],n=this.corners,i=0;i<4;i++)r.push(e(n[i],n[i+1]||n[0]));this.edgePoints[t]=r};var squareTest=new SquareObject({x:100,y:100},100);squareTest.squareCornersFlat();for(var _i7=0;_i7<3;_i7++)squareTest.getPointOnEdge(randomPointsOnLine,_i7);var doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';window.URL=window.URL||window.webkitURL;var prefix={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},SVGSources=[],body=document.body,emptySvg=window.document.createElementNS(prefix.svg,"svg");emptySvg.setAttribute("class","displaynone"),window.document.body.appendChild(emptySvg);var emptySvgDeclarationComputed=getComputedStyle(emptySvg);TriangleObject.prototype.triangleCornersFlat=function(){for(var e=[],t=0;t<=2;t++){var r={},n=120*t+30,i=Math.PI/180*n;r.x=this.center.x+this.size*Math.cos(i),r.y=this.center.y+this.size*Math.sin(i),e.push(r)}this.corners=e},TriangleObject.prototype.getPointOnEdge=function(e,t){this.i=t;for(var r=[],n=this.corners,i=0;i<3;i++)r.push(e(n[i],n[i+1]||n[0]));this.edgePoints[t]=r};var triangleTest=new TriangleObject({x:490,y:125},90);triangleTest.triangleCornersFlat();for(var _i12=0;_i12<2;_i12++)triangleTest.getPointOnEdge(randomPointsOnLine,_i12);