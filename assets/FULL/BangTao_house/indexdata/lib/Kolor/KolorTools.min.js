(function(){var h=void 0,k=!0,l=null,m=!1;function o(){return function(){}}
(function(){ktools={h:function(){var a="en",d="",c=[],g=new ktools.j;this.setLanguage=this.Ra=function(b){a=b};this.getLanguage=this.ha=function(){return a};this.getAvailableLanguages=this.ca=function(){return c};this.setLanguageFilePath=this.L=function(b,c){d=(b?b:"")+a+(c?c:"")};this.initLanguage=this.sa=function(b,c,f){a=b;c&&this.L(c,f);for(var b=ktools.q.G(d),c=b.getElementsByTagName("data").length,f=h,j=0;j<c;j++)f=b.getElementsByTagName("data")[j].textContent!=h?b.getElementsByTagName("data")[j].textContent:
h,f==h&&b.getElementsByTagName("data")[j].innerText&&(f=b.getElementsByTagName("data")[j].innerText),f==h&&b.getElementsByTagName("data")[j].innerHTML&&(f=b.getElementsByTagName("data")[j].innerHTML),f==h&&b.getElementsByTagName("data")[j].text&&(f=b.getElementsByTagName("data")[j].text),f==h&&b.getElementsByTagName("data")[j].firstChild&&(f=b.getElementsByTagName("data")[j].firstChild.data),g.add(b.getElementsByTagName("data")[j].getAttribute("name"),f)};this.getMessage=this.ia=function(b){return g.item(a+
"_"+b)}}};ktools.I18N=ktools.h;ktools.h.a=l;ktools.I18N.instance=ktools.h.a;ktools.h.d=function(){this.a==l&&(this.a=new ktools.h);return this.a};ktools.I18N.getInstance=ktools.h.d;ktools.q=o();ktools.XML=ktools.q;ktools.q.G=function(a){var d=l,c=l,g=m;try{d=new XMLHttpRequest,d.open("GET",a,m)}catch(b){if("undefined"!=typeof window.ActiveXObject){c=new ActiveXObject("Microsoft.XMLDOM");for(c.async=m;4!=c.readyState;);c.load(a);g=k;return c}c=document.implementation.createDocument("","",l);c.onload=
function(){return c};c.load(a);g=k}if(!g)return d.send(""),c=d.responseXML,g=k,c};ktools.XML.importXML=ktools.q.G;ktools.w=o();ktools.Device=ktools.w;ktools.w.Da=function(){return"ontouchstart"in window||"ontouchstart"in document.documentElement||window.Wa&&document instanceof DocumentTouch};ktools.Device.isTouch=ktools.w.Da;ktools.e=o();ktools.DOM=ktools.e;ktools.e.ja=function(a){for(var d=y=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)d+=a.offsetLeft-a.scrollLeft,y+=a.offsetTop-a.scrollTop,a=
a.offsetParent;return{x:d,y:y}};ktools.DOM.getOffset=ktools.e.ja;ktools.e.preventDefault=function(a){e=a?a:window.event;e.preventDefault?e.preventDefault():e.returnValue=m};ktools.DOM.preventDefault=ktools.e.preventDefault;ktools.e.Ta=function(a){e=a?a:window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=k};ktools.DOM.stopEventPropagation=ktools.e.Ta;ktools.n=o();ktools.String=ktools.n;ktools.n.Sa=function(a,d){return a.match("^"+d)==d};ktools.String.startsWith=ktools.n.Sa;ktools.n.X=
function(a){var d=a,d=jQuery("<div/>").html(a).text();return unescape(d)};ktools.String.decode=ktools.n.X;ktools.v=o();ktools.Code=ktools.v;ktools.v.eval=function(a){a=a.replace(/(\r\n|\n|\r|\t)/gm,"");eval(a)};ktools.Code.eval=ktools.v.eval;ktools.z=o();ktools.Url=ktools.z;ktools.z.ka=function(a,d){var d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c=RegExp("[\\?&]"+d+"=([^&#]*)").exec(a);return c==l?"":c[1]};ktools.Url.getParam=ktools.z.ka;ktools.m=o();ktools.Color=ktools.m;ktools.m.qa=function(a,
d){var c=/^#?[0-9a-f]{3,6}$/i.test(a);return"undefined"!=typeof a&&(7==a.length||4==a.length)&&c?a.toUpperCase():"undefined"!=typeof a&&(6==a.length||3==a.length)&&c?"#"+a.toUpperCase():"undefined"!=typeof d?d:"#FFFFFF"};ktools.Color.htmlColor=ktools.m.qa;ktools.m.pa=function(a){var d=[];d[0]=parseInt(a.substr(0,2),16);d[1]=parseInt(a.substr(2,2),16);d[2]=parseInt(a.substr(4,2),16);return d};ktools.Color.hex2rgb=ktools.m.pa;ktools.O=function(){function a(b){var a=b.indexOf(this.u);return-1==a?h:parseFloat(b.substring(a+
this.u.length+1))}function d(b){for(var a=0,c=b.length;a<c;a++){var d=b[a].string,q=b[a].prop;this.u=b[a].versionSearch||b[a].identity;if(d){if(-1!=d.indexOf(b[a].subString))return b[a].identity}else if(q)return b[a].identity}}this.versionSearchString=this.u=this.version=this.version=this.OS=this.f=this.browser=this.browser="";var c=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,
subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",
versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],g=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,
subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];this.isIE=this.I=function(){return"Explorer"==this.browser};this.isVista=this.Ea=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.0")};this.isXP=this.Ka=function(){return-1!=navigator.userAgent.indexOf("Windows NT 5")};this.isWindows7=this.Ia=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.1")};this.isWindows8=this.Ja=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.2")};
this.isWindows=this.Ha=function(){return"Windows"==this.f};this.isLinux=this.za=function(){return"Linux"==this.f};this.isWP8=this.Ga=function(){return-1!=navigator.userAgent.indexOf("Windows Phone 8")};this.isWP7=this.Fa=function(){return-1!=navigator.userAgent.indexOf("Windows Phone 7")};this.isAndroid=this.ta=function(){return-1!=navigator.userAgent.indexOf("Android")};this.isIE9=this.wa=function(){return this.I()&&9==this.D()};this.isMac=this.Aa=function(){return"Mac"==this.f||this.s()};this.isIOS=
this.s=function(){return"iPhone/iPod"==this.f||"iPad"==this.f};this.isIOSRetina=this.xa=function(){return this.s()&&1<window.devicePixelRatio};this.isMobileSafari=this.Ba=function(){return this.K()&&this.s()};this.isSafari=this.K=function(){return"Safari"==this.browser};this.isChrome=this.ua=function(){return"Chrome"==this.browser};this.isFirefox=this.va=function(){return"Firefox"==this.browser||"Mozilla"==this.browser};this.isOpera=this.Ca=function(){return"Opera"==this.browser};this.getInternetExplorerVersion=
this.D=function(){var b=-1;if("Microsoft Internet Explorer"==navigator.appName){var a=navigator.userAgent,c=/MSIE ([0-9]{1,}[.0-9]{0,})/;c.exec(a)!=l&&(b=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(a=navigator.userAgent,c=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,c.exec(a)!=l&&(b=parseFloat(RegExp.$1)));return b};this.init=this.ra=function(){this.browser=d(c)||"An unknown browser";this.version=a(navigator.userAgent)||a(navigator.appVersion)||"An unknown version";this.f=d(g)||"An unknown OS"}};
ktools.BrowserDetect=ktools.O;ktools.Q=function(a){var d=["webkit","moz","ms","o","khtml"],c=a||document.documentElement,g=m,b="",i="",f={enter:l,exit:l,change:l,resize:l},j=m;this.getExternal=this.b=function(){return f};this.setExternal=this.Qa=function(b){f=b};this.isFullscreen=this.A=function(){return""===b?document.fullscreen?document.fullscreen:document.fullScreen:"webkit"==b?document[b+"IsFullscreen"]?document[b+"IsFullscreen"]:document[b+"IsFullScreen"]:document[b+"Fullscreen"]?document[b+
"Fullscreen"]:document[b+"FullScreen"]};this.getFullscreenElement=this.o=function(){if(g){var a=document;return""===b?a.aa?a.aa:a.Ya:a[b+"FullscreenElement"]?a[b+"FullscreenElement"]:a[b+"FullScreenElement"]}return l};this.getFullscreenEnabled=this.ga=function(){if(g)return k;var a=document;if(""===b)return a.ba?a.ba:a.Za;if("webkit"==b){if(kolorBrowserDetect&&"Safari"==kolorBrowserDetect.browser&&7>kolorBrowserDetect.version)return m;if(a[b+"RequestFullscreen"])return a[b+"RequestFullscreen"];console.log(a[b+
"RequestFullScreen"]);return a[b+"RequestFullScreen"]}return a[b+"FullscreenEnabled"]?a[b+"FullscreenEnabled"]:a[b+"FullScreenEnabled"]};this.supportsFullscreen=this.Ua=function(){debug&&console.log("ktools.Fullscreen.supportsFullscreen");i="";if("undefined"!=typeof document.exitFullscreen||"undefined"!=typeof document.exitFullScreen||"undefined"!=typeof document.cancelFullscreen||"undefined"!=typeof document.cancelFullScreen)g=k,i+="fullscreenchange";else for(var a=0,f=d.length;a<f;a++){b=d[a];if("undefined"!=
typeof document[b+"CancelFullScreen"]||"undefined"!=typeof document[b+"CancelFullscreen"]||"undefined"!=typeof document[b+"ExitFullscreen"]||"undefined"!=typeof document[b+"ExitFullScreen"]){if("webkit"==b&&kolorBrowserDetect&&"Safari"==kolorBrowserDetect.browser&&7>kolorBrowserDetect.version){g=m;break}g=k;i="ms"==b?i+"MSFullscreenChange":i+b+"fullscreenchange";break}if("webkit"==b){var p=c;if(p.webkitSupportsFullscreen){g=p.webkitSupportsFullscreen;break}}}a="#"+c.id+":fullscreen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }";
a+="#"+c.id+":fullscreen::backdrop { background-color: black; }";a+="#"+c.id+":full-screen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }";""!=b&&c.id&&("ms"==b?(a+="#"+c.id+":-"+b+"-fullscreen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }",a+="#"+c.id+":-"+b+"-fullscreen::-"+b+"-backdrop { background-color: black; }"):a+="#"+c.id+":-"+b+"-full-screen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }");
f=document.createElement("style");f.type="text/css";f.styleSheet?f.styleSheet.cssText=a:f.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(f);var n=this;document.addEventListener?document.addEventListener(i,function(){j=n.o()!=l?k:m;if(n.b().change&&n.b().resize){n.b().change(j);n.b().resize()}}):i&&document.attachEvent(i,function(){j=n.o()!=l?k:m;if(n.b().change&&n.b().resize){n.b().change(j);n.b().resize()}});return g};this.request=this.Na=function(){debug&&
console.log("ktools.Fullscreen.request");if(g){if(!this.A()||!this.o())if(""===b)c.Oa?c.Oa():c.$a();else if(c[b+"RequestFullscreen"])if("webkit"==b)c[b+"RequestFullscreen"](Element.N);else c[b+"RequestFullscreen"]();else if("webkit"==b)c[b+"RequestFullScreen"](Element.N);else c[b+"RequestFullScreen"]()}else this.b().enter&&this.b().enter()};this.exit=this.Y=function(){debug&&console.log("ktools.Fullscreen.exit");if(g){if(this.A()||this.o()){var a=document;if(""===b)a.$?a.$():a.Z?a.Z():a.W?a.W():a.Xa();
else if(a[b+"ExitFullscreen"])a[b+"ExitFullscreen"]();else if(a[b+"ExitFullScreen"])a[b+"ExitFullScreen"]();else if(a[b+"CancelFullscreen"])a[b+"CancelFullscreen"]();else a[b+"CancelFullScreen"]()}}else this.b().exit&&this.b().exit()}};ktools.Fullscreen=ktools.Q;ktools.l=function(){var a=[];this.add=this.add=function(d){a.push(d)};this.remove=this.remove=function(d){for(var c=0;c<a.length;c++)a[c]==d&&a.splice(c,1)};this.get=this.get=function(d){return a[d]};this.toArray=this.toArray=function(){return a};
this.size=this.size=function(){return a.length}};ktools.Collection=ktools.l;ktools.j=function(){this.count=this.count=0;this.map=this.map={};this.add=this.add=function(a,d){if("undefined"!=typeof a){if(this.map[a]!=h)return this.count;this.map[a]=d;return++this.count}};this.update=this.update=function(a,d){if("undefined"!=typeof a)return this.map[a]=d,this.count};this.remove=this.remove=function(a){if(this.map[a]!=h)return delete this.map[a],--this.count};this.item=this.item=function(a){return this.map[a]};
this.keys=this.keys=function(){var a=new ktools.l,d;for(d in this.map)a.add(d);return a.toArray()};this.values=this.Va=function(){var a=new ktools.l,d;for(d in this.map)a.add(this.map[d]);return a.toArray()}};ktools.Map=ktools.j;ktools.c=function(){if(ktools.c.caller!=ktools.c.d)throw Error("This object cannot be instanciated, use getInstance.");var a=new ktools.j,d=new ktools.j;this.loadScript=this.g=function(c,d,b){if("undefined"==typeof a.item(c)){a.add(c,d);var i=document.createElement("script");
i.type="text/javascript";i.readyState?i.onreadystatechange=function(){if("loaded"==i.readyState||"complete"==i.readyState)i.onreadystatechange=l,b&&b()}:i.onload=function(){b&&b()};i.src=d;document.getElementsByTagName("head")[0].appendChild(i);debug&&console.log("DynamicLoader : loadScript "+c)}else debug&&console.log("DynamicLoader : "+c+" already loading/loaded"),b&&b()};this.loadCss=this.p=function(a,g){debug&&console.log("preparing css "+a);if("undefined"==typeof d.item(a)){d.add(a,g);var b=
document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=g;b.media="screen";b.title="dynamicLoadedSheet";document.getElementsByTagName("head")[0].appendChild(b);debug&&console.log("css "+a+" added")}else debug&&console.log("css "+a+" already added")}};ktools.DynamicLoader=ktools.c;ktools.c.a=l;ktools.DynamicLoader.instance=ktools.c.a;ktools.c.d=function(){this.a==l&&(this.a=new ktools.c);return this.a};ktools.DynamicLoader.getInstance=ktools.c.d;ktools.S=function(a,d,c,g){var b=
this,i=g,f=m,j=new ktools.j;this.getName=this.getName=function(){return a};this.getUrl=this.k=function(){return d};this.getDependances=this.ea=function(){return c};this.isLoaded=this.B=function(){return f};this.setLoaded=this.M=function(a){f=a};this.isPrimaryNode=this.J=function(){"undefined"==typeof i&&(i=m);return i};this.getParentsToCall=this.F=function(){return j};this.addParentToCall=this.C=function(a){"undefined"!=typeof a&&a!=l&&j.add(a.getName(),a)};this.loadScript=this.g=function(a){b.C(a);
if(b.B())return b.r();if(0==c.length)ktools.c.d().g(b.getName(),b.k(),b.r);else for(a=0;a<c.length;a++)c[a].g(b)};this.callback=this.r=function(){debug&&console.log("script info : "+b.getName()+" loaded !");b.M(k);for(var a=b.F(),c=l,d=a.keys(),f=0;f<a.count;f++)c=a.item(d[f]),ktools.c.d().g(c.getName(),c.k(),c.r)}};ktools.Script=ktools.S;ktools.P=function(a,d){var c=this;this.getName=this.getName=function(){return a};this.getUrl=this.k=function(){return d};this.loadCss=this.p=function(){ktools.c.d().p(c.getName(),
c.k())}};ktools.CssStyle=ktools.P;ktools.R=function(a){var d=new ktools.l,c=new ktools.l,g=l,b=m,i=l;this.getPluginName=this.ma=function(){return a};this.addScript=this.V=function(a){d.add(a)};this.getScripts=this.oa=function(){return d};this.addCss=this.T=function(a){c.add(a)};this.getCss=this.da=function(){return c};this.setEditorScript=this.Pa=function(a){g=a};this.getEditorScript=this.fa=function(){return g};this.register=this.La=function(a){i=a;return this};this.getRegistered=this.na=function(){return i};
this.isInitialized=this.ya=function(){for(var a=0;a<d.size();a++)b|=d.get(a).B();return b};this.initialize=this.H=function(){for(var a=l,b=0;b<c.size();b++)a=c.get(b),a.p();a=l;for(b=0;b<d.size();b++)a=d.get(b),a.J()&&a.g()}};ktools.KolorPlugin=ktools.R;ktools.i=function(){this.pluginList=this.t=new ktools.j;this.addPlugin=this.U=function(a,d,c){this.t.add(a,d);("undefined"==typeof c||c)&&d.H()};this.removePlugin=this.Ma=function(a){this.t.remove(a)};this.getPlugin=this.la=function(a){return this.t.item(a)}};
ktools.KolorPluginList=ktools.i;ktools.i.a=l;ktools.KolorPluginList.instance=ktools.i.a;ktools.i.d=function(){this.a==l&&(this.a=new ktools.i);return this.a};ktools.KolorPluginList.getInstance=ktools.i.d})();})();